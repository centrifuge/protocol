@startuml
hide empty members

package misc {
    abstract Recoverable
    class Escrow
}

package common {
    class Gateway
    class MessageDispatcher
    class PoolEscrow
}

package managers {
    class OnOfframpManager
    class MerkleProofManager
}

class Hidden

class Spoke
class ShareToken
class BalanceSheet
class PoolEscrowFactory
class TokenFactory

interface IVaultFactory
interface IVault
interface IVaultManager

Spoke -left-> TokenFactory
Spoke -down-> PoolEscrowFactory
Spoke -up->"n" IVaultFactory
Spoke -up->"n" ShareToken
Spoke -up->"n" IVault
Spoke ---> Gateway
Spoke ---> MessageDispatcher

BalanceSheet -right-> PoolEscrowFactory
BalanceSheet -left--> Spoke
BalanceSheet --> MessageDispatcher
BalanceSheet --> Gateway

PoolEscrowFactory .right.> PoolEscrow
PoolEscrow -right-|> Escrow
Escrow -right-|> Recoverable

ShareToken -right-> IVault
IVault -up-> IVaultManager

OnOfframpManager -down-> BalanceSheet
MerkleProofManager -up-> BalanceSheet

TokenFactory .up.> ShareToken
IVaultFactory .left.> IVault

' Hidden stuff to make things more visual

hide Hidden

OnOfframpManager -down[hidden]-> MerkleProofManager
MerkleProofManager -down-> Hidden
Hidden -up-> BalanceSheet

@enduml
